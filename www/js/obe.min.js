function getMobileOperatingSystem(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":"unknown"}function onSuccess(e){$(".preview-img").attr("src",e+"?"+Math.random()),imageFile=e}function receiptonSuccess(e){if(null!=e||""!=e){$("#preloader").show();var t=new FileUploadOptions;t.fileKey="file",t.fileName=e.substr(e.lastIndexOf("/")+1),t.mimeType="image/jpeg";var a={};a.value1="test",a.value2="param",t.params=a,t.chunkedMode=!1;var i=new FileTransfer;i.upload(e,"http://www.zfikri.tk/obe_api/upload-receipt.php?obe_id="+localStorage.getItem("obe_sessionID"),function(){$("#preloader").delay(1e3).fadeOut("slow").hide(),alert("Payment accepted, please wait for our validation.\nThank you.")},function(e){$("#preloader").delay(1e3).fadeOut("slow").hide(),e.preventDefault(),alert("Oops, something went wrong!")},t)}}function onFail(){}$(document).on("pagebeforechange",function(e,t){var a=t.toPage,i=t.options.fromPage;if("string"==typeof a){var r=$.mobile.path.parseUrl(a);a=r.hash||"#"+r.pathname.substring(1),i&&(i="#"+i.attr("id"))}});var local_api="api/",remote_api="http://www.zfikri.tk/obe_api/",api="";console.log(getMobileOperatingSystem()),api="Android"==getMobileOperatingSystem()?remote_api:remote_api,$("#remove").on("click",function(){confirm("Are you sure to remove?\nSubscribe as stockist can be find in setting.")&&$(this).parent().parent().animate({opacity:"hide",right:"200px"},"slow","linear",function(){$(this).parent().remove()})}),$(".show-password").each(function(){$(this).on("mousedown",function(){var e=$(this).parent().parent().find("input[data-input=pwd]");e.prop("type","text")}),$(this).on("mouseup",function(){var e=$(this).parent().parent().find("input[data-input=pwd]");e.prop("type","password")})});var productName=["Brest Garden","Caen Lemon","Honey Paris","La Rochelle","Le Havre","Le Mans","Lille Vanilla","Lorraine Lime","Lyanne Reims","Lyon Air","Marseille Lavender","Nancy Strawberry","Orly Orange","Toulouse Apple"],productImg=["brest-garden","caen-lemon","honey-paris","la-rochelle","le-havre","le-mans","lille-vanilla","lorraine-lime","lyanne-reims","lyon-air","marseille-lavender","nancy-strawberry","orly-orange","toulouse-apple"];for($(".product-list").html(""),i=0;i<productName.length;i++){var str='<li> <a href="#" data-item="'+productImg[i]+'" data-type="product"> <table style="width: 100%"> <tr> <td style="width: 35%;padding:0;"><img src="images/fleur/'+productImg[i]+'.jpeg" style="width: 80px;height: 80px;border: 3px solid #50597b;border-radius: 50%;"></td> <td style="width:65%;padding:0 0 0 10px;vertical-align:top;color:#fff;"> <p style="font-size: 1.3em">'+productName[i]+'</p> <p><span class="product-order" style="margin: 0;position: absolute;width: 50%;"> <input type="number" name="order_quantity" style="width:65%;padding:3px 10px;text-align: right;" maxlength="5"> <i>pcs</i> </span> </p> </td> </tr> </table> <div class="clear"></div> </a> </li>';$(".product-list").append(str)}var marketingName=["Tester","Flyers","Poster","Standee","Rolls Up","T-stand"],marketingImg=["tester","flyers","poster","standee","rolls-up-t-stand","rolls-up-t-stand"];for($(".marketing-list").html(""),i=0;i<marketingName.length;i++){var str='<li> <a href="#" data-item="'+marketingImg[i]+'" data-type="marketing"> <table style="width: 100%"> <tr> <td style="width: 35%;padding:0;"><img src="images/marketing/'+marketingImg[i]+'.jpeg" style="width: 80px;height: 80px;border: 3px solid #50597b;border-radius: 50%;"></td> <td style="width:65%;padding:0 0 0 10px;vertical-align:top;color:#fff;"> <p style="font-size: 1.3em">'+marketingName[i]+'</p> <p><span class="marketing-order" style="margin: 0;position: absolute;width: 50%;"> <input type="number" name="order_quantity" style="width:65%;padding:3px 10px;text-align: right;" maxlength="5"> <i>pcs</i> </span> </p> </td> </tr> </table> <div class="clear"></div> </a> </li>';$(".marketing-list").append(str)}$(".main").on("pagebeforeshow",function(e,t){var a=t.prevPage.attr("id");$(".go-back").attr("href","#"+a)}),$("#add-agent .go-back").bind("click",function(){location.reload()}),$(".but_take").each(function(){$(this).on("click",function(){navigator.camera.cleanup(),navigator.camera.getPicture(onSuccess,onFail,{quality:20,targetWidth:900,targetHeight:900,allowEdit:!0,sourceType:Camera.PictureSourceType.CAMERA,destinationType:Camera.DestinationType.FILE_URL,encodingType:Camera.EncodingType.JPEG})})}),$(".but_select").each(function(){$(this).on("click",function(){navigator.camera.cleanup(),navigator.camera.getPicture(onSuccess,onFail,{quality:50,targetWidth:900,targetHeight:900,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,allowEdit:!0,destinationType:Camera.DestinationType.FILE_URI,encodingType:Camera.EncodingType.JPEG})})}),$("#upload-receipt").on("click",function(){navigator.camera.cleanup(),navigator.camera.getPicture(receiptonSuccess,onFail,{quality:50,targetWidth:900,targetHeight:900,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,allowEdit:!0,destinationType:Camera.DestinationType.FILE_URI,encodingType:Camera.EncodingType.JPEG})});var imageFile;$(".upload-profile-img").each(function(){$(this).on("click",function(){if(null!=imageFile||""!=imageFile){$("#preloader").show();var e=new FileUploadOptions;e.fileKey="file",e.fileName=imageFile.substr(imageFile.lastIndexOf("/")+1),e.mimeType="image/jpeg";var t={};t.value1="test",t.value2="param",e.params=t,e.chunkedMode=!1;var a=new FileTransfer;a.upload(imageFile,"http://www.zfikri.tk/obe_api/upload.php?obe_id="+localStorage.getItem("obe_sessionID"),function(){$(".profile-img").attr("src",imageFile+"?"+Math.random()),$("#preloader").delay(1e3).fadeOut("slow").hide()},function(e){$("#preloader").delay(1e3).fadeOut("slow").hide(),e.preventDefault(),alert("Oops, something went wrong!")},e)}})}),$(".cancel-img-update").on("click",function(){$(".preview-img").attr("src",$(".profile-img").attr("src"))}),"Agent"==localStorage.getItem("obe_sessionROLE")?($("[data-user=stockist]").hide(),$("[data-user=agent]").show(),$("[data-user=agent-new]").show()):"Stockist"==localStorage.getItem("obe_sessionROLE")?($("[data-user=agent]").hide(),$("[data-user=stockist]").show(),$("[data-user=agent-new]").hide()):($("[data-user=stockist]").hide(),$("[data-user=agent]").hide(),$("[data-user=agent-new]").show()),$(".marketing-list").hide(),$("#show-marketing-only").on("click",function(){$(".marketing-list").show(),$(".product-list").hide()}),$("#show-product-only").on("click",function(){$(".marketing-list").hide(),$(".product-list").show()});